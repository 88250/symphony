var ChatRoom={init:function(){if("mobile"!==$.ua.device.type?$(".list").height($(".side").height()-$(".chat-room .module:first").outerHeight()-20):$(".list").height($(window).height()-173),0===$("#chatContent").length)return!1;ChatRoom.editor=Util.newVditor({id:"chatContent",cache:!0,preview:{mode:"editor"},resize:{enable:!0,position:"bottom"},height:160,counter:4096,placeholder:"Say sth...",ctrlEnter:function(){ChatRoom.send()}})},send:function(){var t={content:ChatRoom.editor.getValue()};$.ajax({url:Label.servePath+"/chat-room/send",type:"POST",cache:!1,data:JSON.stringify(t),beforeSend:function(){$(".form button.red").attr("disabled","disabled").css("opacity","0.3")},success:function(t){t.sc?($("#chatContentTip").removeClass("error succ").html(""),ChatRoom.editor.setValue("")):$("#chatContentTip").addClass("error").html("<ul><li>"+t.msg+"</li></ul>")},error:function(t){$("#chatContentTip").addClass("error").html("<ul><li>"+t.statusText+"</li></ul>")},complete:function(t,e){$(".form button.red").removeAttr("disabled").css("opacity","1")}})}};