var Activity={bet1A0001:function(t){var e={smallOrLarge:$("input[name=smallOrLarge]:checked").val(),amount:$("input[name=amount]:checked").val()};$.ajax({url:Label.servePath+"/activity/1A0001/bet",type:"POST",headers:{csrfToken:t},cache:!1,data:JSON.stringify(e),success:function(t,e){0===t.code?($("#betDiv, #betBtn").remove(),$("#tip").addClass("succ").removeClass("error").html("<ul><li>"+t.msg+"</li></ul>")):$("#tip").addClass("error").removeClass("succ").html("<ul><li>"+t.msg+"</li></ul>"),$("#tip").show(),setTimeout(function(){$("#tip").hide()},3e3)}})},collect1A0001:function(){$.ajax({url:Label.servePath+"/activity/1A0001/collect",type:"POST",cache:!1,data:JSON.stringify({}),success:function(t,e){$("#tip").show(),0===t.code?($("#tip").addClass("succ").removeClass("error").html("<ul><li>"+t.msg+"</li></ul>"),$("#collectBtn").remove()):($("#tip").addClass("error").removeClass("succ").html("<ul><li>"+t.msg+"</li></ul>"),setTimeout(function(){$("#tip").hide()},3e3))}})},charInit:function(t){var e=document.getElementById(t),a=e.getContext("2d");a.strokeStyle="#000",a.lineWidth=5,a.lineJoin=a.lineCap="round",a.shadowBlur=5;var n=!(a.shadowColor="rgb(0, 0, 0)"),o=0,i=0;e.onmousedown=function(t){n=!0,a.beginPath(),o=t.clientX-t.target.offsetLeft+$(window).scrollLeft(),i=t.clientY-t.target.offsetTop+$(window).scrollTop(),a.moveTo(o,i)},e.onmousemove=function(t){n&&(o=t.clientX-t.target.offsetLeft+$(window).scrollLeft(),i=t.clientY-t.target.offsetTop+$(window).scrollTop(),a.lineTo(o,i),a.stroke())},e.onmouseup=function(){n=!1},e.addEventListener("touchstart",function(t){a.beginPath(),o=t.changedTouches[0].pageX-t.target.offsetLeft,i=t.changedTouches[0].pageY-t.target.offsetTop,a.moveTo(o,i)},!1),e.addEventListener("touchmove",function(t){t.preventDefault(),o=t.changedTouches[0].pageX-t.target.offsetLeft,i=t.changedTouches[0].pageY-t.target.offsetTop,a.lineTo(o,i),a.stroke()},!1)},submitCharacter:function(t){var e={dataURL:document.getElementById(t).toDataURL(),character:$("h2.fn-inline a").text()};$.ajax({url:Label.servePath+"/activity/character/submit",type:"POST",cache:!1,data:JSON.stringify(e),beforeSend:function(){var t=$("button.green");t.attr("disabled","disabled").css("opacity","0.3").text(t.text()+"ing")},success:function(t,e){Util.alert(t.msg),0===t.code&&window.location.reload()},complete:function(){var t=$("button.green");t.removeAttr("disabled").css("opacity","1").text(t.text().substr(0,t.text().length-3))}})},clearCharacter:function(t){var e=document.getElementById(t).getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height)},initSnake:function(){EatingSnake.initMap("snakeCanvas")},startSnake:function(t){confirm(Label.activityStartEatingSnakeTipLabel)&&($(document).unbind("keyup"),EatingSnake.start(t),document.onkeydown=function(t){t=t||window.event;EatingSnake.input(t.keyCode)})}};