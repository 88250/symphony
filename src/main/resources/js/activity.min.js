var Activity={bet1A0001:function(t){var e={smallOrLarge:$("input[name=smallOrLarge]:checked").val(),amount:$("input[name=amount]:checked").val()};$.ajax({url:Label.servePath+"/activity/1A0001/bet",type:"POST",headers:{csrfToken:t},cache:!1,data:JSON.stringify(e),success:function(t,e){0===t.code?($("#betDiv, #betBtn").remove(),$("#tip").addClass("succ").removeClass("error").html("<ul><li>"+t.msg+"</li></ul>")):$("#tip").addClass("error").removeClass("succ").html("<ul><li>"+t.msg+"</li></ul>"),$("#tip").show(),setTimeout(function(){$("#tip").hide()},3e3)}})},collect1A0001:function(){$.ajax({url:Label.servePath+"/activity/1A0001/collect",type:"POST",cache:!1,data:JSON.stringify({}),success:function(t,e){$("#tip").show(),0===t.code?($("#tip").addClass("succ").removeClass("error").html("<ul><li>"+t.msg+"</li></ul>"),$("#collectBtn").remove()):($("#tip").addClass("error").removeClass("succ").html("<ul><li>"+t.msg+"</li></ul>"),setTimeout(function(){$("#tip").hide()},3e3))}})},charInit:function(t){var t=document.getElementById(t),e=t.getContext("2d"),n=(e.strokeStyle="#000",e.lineWidth=5,e.lineJoin=e.lineCap="round",e.shadowBlur=5,!(e.shadowColor="rgb(0, 0, 0)")),a=0,o=0;t.onmousedown=function(t){n=!0,e.beginPath(),a=t.clientX-t.target.offsetLeft+$(window).scrollLeft(),o=t.clientY-t.target.offsetTop+$(window).scrollTop(),e.moveTo(a,o)},t.onmousemove=function(t){n&&(a=t.clientX-t.target.offsetLeft+$(window).scrollLeft(),o=t.clientY-t.target.offsetTop+$(window).scrollTop(),e.lineTo(a,o),e.stroke())},t.onmouseup=function(){n=!1},t.addEventListener("touchstart",function(t){e.beginPath(),a=t.changedTouches[0].pageX-t.target.offsetLeft,o=t.changedTouches[0].pageY-t.target.offsetTop,e.moveTo(a,o)},!1),t.addEventListener("touchmove",function(t){t.preventDefault(),a=t.changedTouches[0].pageX-t.target.offsetLeft,o=t.changedTouches[0].pageY-t.target.offsetTop,e.lineTo(a,o),e.stroke()},!1)},submitCharacter:function(t){t={dataURL:document.getElementById(t).toDataURL(),character:$("h2.fn-inline a").text()};$.ajax({url:Label.servePath+"/activity/character/submit",type:"POST",cache:!1,data:JSON.stringify(t),beforeSend:function(){var t=$("button.green");t.attr("disabled","disabled").css("opacity","0.3").text(t.text()+"ing")},success:function(t,e){Util.alert(t.msg),0===t.code&&window.location.reload()},complete:function(){var t=$("button.green");t.removeAttr("disabled").css("opacity","1").text(t.text().substr(0,t.text().length-3))}})},clearCharacter:function(t){t=document.getElementById(t).getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height)},initSnake:function(){EatingSnake.initMap("snakeCanvas")},startSnake:function(t){confirm(Label.activityStartEatingSnakeTipLabel)&&($(document).unbind("keyup"),EatingSnake.start(t),document.onkeydown=function(t){t=t||window.event;EatingSnake.input(t.keyCode)})}};